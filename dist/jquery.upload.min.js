/*! sioweb-upload 2017-08-28 */
!function(a){"use strict";var b,c="upload";a[c+"Default"]={container:window,isHtml:!1,ajax:null,confirm:null,dragOverTimeout:!1,filename:"pdf[file]",preventDropDefault:!0,preventDragoverDefault:!0,maxSize:3072e4,data:function(){},drop:function(){},over:function(){},change:function(){},success:function(){},ajaxSend:function(){},error:function(){},defaultDrop:null},b=function(){var b=this;this.item=!1,this.initOptions=new Object(a[c+"Default"]),this.uploadElement=null,this.uploadArea=null,this.init=function(c){b=this,this.container||(this.container=window),this.elem=c,this.item=a(this.elem),this.container=a(this.container),this.isHTML="html"===b.elem.tagName.toLowerCase(),a(document).on("dragover",function(){clearTimeout(b.dragOverTimeout),b.item.removeClass("sw-drag-over")}),this.isHTML||this.loaded()},this.reset=function(){null!==b.uploadArea&&b.uploadArea.html("Keine Datei ausgewählt")},this.loaded=function(){b.uploadElement=b.item.find('input[type="file"]'),b.uploadElement.change(b.internOnChange),b.uploadArea=a('<div class="upload_element">Keine Datei ausgewählt</div>').insertBefore(b.uploadElement),b.item.on("drop",function(a){b.preventDropDefault&&(a.stopPropagation(),a.preventDefault()),b.internDrop(a)}).on("dragover",function(a){b.preventDragoverDefault&&(a.stopPropagation(),a.preventDefault()),b.internDragover(a)})},this.internOnChange=function(c){var d=this,e=this.files[0],f=new FormData;null!==e&&f.append(b.filename,e),b.uploadArea.html('Datei "'+e.name+'" ('+(e.size/1048576).toFixed(2)+") MiB ausgewählt."),null!==b.ajax&&(null!==b.confirm?a.confirm({title:"Datei hochladen",content:"Soll die ausgewählte Datei nun hochgeladen werden?",accept:function(a){b.send(f),b.change(b,c),d.value=""},abort:function(){d.value=""}}):(b.send(f),b.change(b,c),d.value=""))},this.addFile=function(a){return b.internDrop(a),this},this.internDrop=function(c){var d=null,e=new FormData;if("undefined"!=typeof c.originalEvent.dataTransfer&&(d=c.originalEvent.dataTransfer.files),null!==d){if(d[0].size>b.maxSize)return void b.error({error:"size",given:d[0].size,allowed:b.maxSize});e.append(b.filename,d[0])}null!==b.uploadArea&&b.uploadArea.html('Datei "'+d[0].name+'" ('+(d[0].size/1048576).toFixed(2)+") MiB ausgewählt."),null!==b.defaultDrop&&"function"==typeof b.defaultDrop?b.defaultDrop(e,d,b):null!==b.ajax&&(null!==b.confirm?a.confirm({title:"Datei hochladen",content:"Soll die ausgewählte Datei nun hochgeladen werden?",accept:function(a){b.send(e)},abort:function(){}}):b.send(e)),b.item.addClass("sw-dropped"),b.isHTML&&(b.item.removeClass("sw-drag-over"),b.drop(c,b,e))},this.internDragover=function(a){clearTimeout(b.dragOverTimeout),b.item.addClass("sw-drag-over"),b.dragOverTimeout=setTimeout(function(){b.item.removeClass("sw-drag-over")},400),b.over(a)},this.send=function(){var c=arguments[0]||{},d=b.data(b);if(d&&"object"==typeof d)for(var e in d)c.append(e,d[e]);a.ajax(a.extend(!0,{url:"/",method:"POST",data:c,asych:!1,cache:!1,contentType:!1,processData:!1,success:function(a){b.success(b,a)},ajaxSend:function(a){b.ajaxSend(b,a)}},b.ajax))}},a[c]=a.fn[c]=function(d){var e="function"==typeof this?a("html"):this,f=arguments[1]||{},g=[];return g[0]=e.each(function(h,i){var j=a.data(this,c);if(d&&"object"!=typeof d&&"init"!==d){if(!j)return;if(!j[d])return;var k=d;g[1]=j[k](f)}else if(j)j.init(this,1),"html"!==e.prop("tagName").toLowerCase()?a.data(this,c,j):g[1]=j;else{"init"===d&&(d=arguments[1]||{}),j=new b;var l=new Object(j.initOptions);d&&(l=a.extend(!0,{},l,d)),j=a.extend(l,j),this[c]=j,j.init(this),"html"!==e.prop("tagName").toLowerCase()?a.data(this,c,j):g[1]=j}}),void 0!==g[1]?g[1]:g[0]}}(jQuery);